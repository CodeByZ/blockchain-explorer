<div *ngIf="document" class="d-flex justify-content-center">
    <div class="card w-100">
        <div class="card-header" (click)="toggleCollapsed()">
            <span class="h5">{{document.title}}</span>
            <span class="h6">({{document.type}})</span>
            <i class="fa fa-lg float-right toggle-icon"
               [ngClass]="collapsed ? 'fa-chevron-circle-down': 'fa-chevron-circle-up'"></i>
        </div>
        <div class="card-block" *ngIf="!collapsed">
            <table class="table table-hover table-sm">
                <thead>
                <tr>
                    <th class="w-25">Property</th>
                    <th>Value</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>
                        <div class="input-clear-group">
                            <input class="form-control mr-sm-2" type="text" [(ngModel)]="propertyFilter"
                                   placeholder="Filter by value">
                            <i *ngIf="propertyFilter" class="clear-input fa fa-remove" (click)="propertyFilter=''"></i>
                        </div>
                    </td>
                    <td>
                        <div class="input-clear-group">
                            <input class="form-control mr-sm-2" type="text" [(ngModel)]="valueFilter"
                                   placeholder="Filter by property">
                            <i *ngIf="valueFilter" class="clear-input fa fa-remove" (click)="valueFilter=''"></i>
                        </div>
                    </td>
                </tr>
                <tr *ngFor="let prop of getFilteredProperties(flatProperties, propertyFilter)" class="table-success">
                    <td *ngIf="valueContains(document[prop], valueFilter)">{{prop}}</td>
                    <td *ngIf="valueContains(document[prop], valueFilter)">
                        <document-id *ngIf="isUuid(document[prop])" [id]="document[prop]"></document-id>
                        <document-property *ngIf="!isUuid(document[prop])" [propertyValue]="document[prop]"></document-property>
                    </td>
                </tr>
                <tr *ngFor="let prop of getFilteredProperties(getPropertiesAsArray(document.properties), propertyFilter)"
                    class="table-info">
                    <td *ngIf="valueContains(document.properties[prop], valueFilter)">{{prop}}</td>
                    <td *ngIf="valueContains(document.properties[prop], valueFilter)">
                        <document-id *ngIf="isUuid(document.properties[prop])" [id]="document.properties[prop]"></document-id>
                        <document-property *ngIf="!isUuid(document.properties[prop])" [propertyValue]="document.properties[prop]"></document-property>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
